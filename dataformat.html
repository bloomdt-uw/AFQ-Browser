
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>The AFQ-Browser data format &#8212; afqbrowser 0.1 documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Long-term data preservation" href="long_term_preservation.html" />
    <link rel="prev" title="Getting more help" href="getting_help.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="the-afq-browser-data-format">
<span id="dataformat"></span><h1>The AFQ-Browser data format<a class="headerlink" href="#the-afq-browser-data-format" title="Permalink to this headline">¶</a></h1>
<p><cite>AFQ-Browser</cite> supports input from two major tractometry software pipelines:
<a class="reference external" href="https://github.com/yeatmanlab/afq">AFQ</a> and <a class="reference external" href="https://surfer.nmr.mgh.harvard.edu/fswiki/Tracula">Tracula</a>. However, data from other tractometry pipelines can also
be used in <cite>AFQ-Browser</cite>, if the data is converted to the following data format
specification.</p>
<p>Internally, <cite>AFQ-Browser</cite> represents its data in three different files:</p>
<p>1. A json file (<code class="docutils literal notranslate"><span class="pre">streamlines.json</span></code>) that contains a description of tract
trajectories in the 3D space of the anatomy, and populates the “Anatomy” panel.
This file has the following structure:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;tract_name1&quot;</span><span class="p">:{</span><span class="s2">&quot;coreFiber&quot;</span><span class="p">:[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span>
                              <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">],</span> <span class="o">...</span> <span class="p">],</span>
                <span class="s2">&quot;1&quot;</span><span class="p">:[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span>
                     <span class="p">[</span><span class="n">x2</span><span class="p">,</span> <span class="n">y2</span><span class="p">,</span> <span class="n">z2</span><span class="p">],</span> <span class="o">...</span><span class="p">],</span>
                <span class="s2">&quot;2&quot;</span><span class="p">:[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span>
                      <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span> <span class="o">...</span> <span class="p">]},</span>
<span class="s2">&quot;tract_name2&quot;</span><span class="p">:{</span><span class="s2">&quot;coreFiber&quot;</span><span class="p">:[[</span><span class="n">x1</span><span class="p">,</span> <span class="n">y1</span><span class="p">,</span> <span class="n">z1</span><span class="p">],</span><span class="o">...</span><span class="p">]</span><span class="o">...</span><span class="p">},</span>

<span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">tract_name1</span></code> and <code class="docutils literal notranslate"><span class="pre">tract_name2</span></code> can be replaced by keys that are the
names of the tracts that you wish to represent. Within each tract, <code class="docutils literal notranslate"><span class="pre">coreFiber</span></code>
is a required key, and subsequent numerical keys are not required. When tract
representation (“core fiber”/”streamlines”) is selected in the GUI, either the
core fibers for each tract are displayed, or all the numerically designated
streamlines for that tract. Coordinates are kept in MNI space aligned to AC-PC.</p>
<p>2. A csv file (<code class="docutils literal notranslate"><span class="pre">nodes.csv</span></code>) that contains information about the tract profiles
and populates the “Bundle details” panel. This table should have columns (and
headers) named <code class="docutils literal notranslate"><span class="pre">subjectID</span></code>, <code class="docutils literal notranslate"><span class="pre">tractID</span></code>, and <code class="docutils literal notranslate"><span class="pre">nodeID</span></code>. The <code class="docutils literal notranslate"><span class="pre">subjectID</span></code>
identifies a unique subject in your dataset, and it can take any string value
you want (e.g., <code class="docutils literal notranslate"><span class="pre">patient1</span></code>), as long as it is consistent with the information
in the <code class="docutils literal notranslate"><span class="pre">subjects.csv</span></code> file (see below). The <code class="docutils literal notranslate"><span class="pre">tractID</span></code> is the same key used in
the <code class="docutils literal notranslate"><span class="pre">streamlines.json</span></code> file to identify the tracts (e.g., <code class="docutils literal notranslate"><span class="pre">tract_name1</span></code>,
<code class="docutils literal notranslate"><span class="pre">tract_name2</span></code>, etc.). The <code class="docutils literal notranslate"><span class="pre">nodeID</span></code> runs from 0 to the n-1, where n is the
number of nodes in the tract profile for that tract. Other columns in this
table will hold the numerical values of statistics in this subject/tract/node/
combination. The headers for these columns can be named any string value that
you would like (e.g., “FA”, “MD”, “my_statistic”, etc.).</p>
<p>3. A csv file (<code class="docutils literal notranslate"><span class="pre">subjects.csv</span></code>) that contains information about the subjects
and populates the “Subject metadata” panel. This file is required to have a
<code class="docutils literal notranslate"><span class="pre">subjectID</span></code> column that matches the subject identifiers used in <code class="docutils literal notranslate"><span class="pre">nodes.csv</span></code>
(see above). It does not require any other columns, but can include any number
of columns that describe the subjects in the study, holding numerical or string
values.</p>
<p>To use data generated from another source, add these data files to the
<code class="docutils literal notranslate"><span class="pre">client/data</span></code> folder in a copy of the <cite>site</cite> folder from the <cite>AFQ-Browser</cite>
<a class="reference external" href="https://github.com/yeatmanlab/AFQ-Browser">repo</a>.</p>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="_static/escience-logo.png" alt="Logo"/>
            </a></p>
<h3><a href="index.html">Table of Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation_guide.html">Installing <code class="docutils literal notranslate"><span class="pre">AFQ-Browser</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="usage_guide.html">Creating and publishing an <code class="docutils literal notranslate"><span class="pre">AFQ-Browser</span></code> instance</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_help.html">Getting more help</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The AFQ-Browser data format</a></li>
<li class="toctree-l1"><a class="reference internal" href="long_term_preservation.html">Long-term data preservation</a></li>
<li class="toctree-l1"><a class="reference internal" href="binder_integration.html">Integration of <code class="docutils literal notranslate"><span class="pre">AFQ-Browser</span></code> and <code class="docutils literal notranslate"><span class="pre">Binder</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017 -- , Jason Yeatman, Adam Richie-Halford, Josh Smith, Anisha Keshavan, Ariel Rokem, The University of Washington.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 2.0.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/dataformat.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>